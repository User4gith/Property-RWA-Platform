<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>资产管理 - PropertyChain RWA平台</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        .asset-card {
            background: white;
            border-radius: 16px;
            border: 1px solid #E5E7EB;
            overflow: hidden;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        .asset-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.12);
            border-color: #3B82F6;
        }
        .asset-card-content {
            padding: 24px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        .asset-card-info {
            flex: 1;
        }
        .status-badge {
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .status-tokenized {
            background: #DCFCE7;
            color: #15803D;
        }
        .status-in-progress {
            background: #FEF3C7;
            color: #B45309;
        }
        .status-pending {
            background: #FEE2E2;
            color: #DC2626;
        }
        .status-draft {
            background: #F3F4F6;
            color: #6B7280;
        }
        .filter-chip {
            padding: 8px 16px;
            border-radius: 20px;
            border: 1px solid #E5E7EB;
            background: white;
            cursor: pointer;
            transition: all 0.2s ease;
            height: 40px;
            display: flex;
            align-items: center;
            font-size: 14px;
        }
        .filter-chip:hover {
            border-color: #3B82F6;
            background: #EFF6FF;
        }
        .filter-chip.active {
            background: #3B82F6;
            color: white;
            border-color: #3B82F6;
        }
        .view-toggle {
            background: #F3F4F6;
            border-radius: 10px;
            padding: 4px;
            height: 48px;
            display: flex;
            align-items: center;
        }
        .view-toggle button {
            padding: 8px 16px;
            border-radius: 8px;
            transition: all 0.2s ease;
            height: 40px;
            display: flex;
            align-items: center;
            font-size: 14px;
            font-weight: 500;
        }
        .view-toggle button.active {
            background: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            color: #3B82F6;
        }
        .view-toggle button:not(.active) {
            color: #6B7280;
        }
        .view-toggle button:not(.active):hover {
            color: #374151;
        }
        .btn-primary {
            background: #3B82F6;
            color: white;
            height: 40px;
            padding: 0 20px;
            border-radius: 10px;
            border: none;
            font-weight: 500;
            font-size: 14px;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        .btn-primary:hover {
            background: #2563EB;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }
        .btn-secondary {
            background: white;
            color: #374151;
            height: 40px;
            padding: 0 20px;
            border-radius: 10px;
            border: 1px solid #D1D5DB;
            font-weight: 500;
            font-size: 14px;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        .btn-secondary:hover {
            background: #F9FAFB;
            border-color: #9CA3AF;
            transform: translateY(-1px);
        }
        .search-input {
            height: 40px;
            padding: 0 16px 0 40px;
            border: 1px solid #D1D5DB;
            border-radius: 10px;
            font-size: 14px;
            transition: all 0.2s ease;
        }
        .search-input:focus {
            ring: 2px;
            ring-color: #3B82F6;
            border-color: #3B82F6;
            outline: none;
        }
        .select-input {
            height: 40px;
            padding: 0 12px;
            border: 1px solid #D1D5DB;
            border-radius: 10px;
            font-size: 14px;
            background: white;
            cursor: pointer;
        }
        .select-input:focus {
            ring: 2px;
            ring-color: #3B82F6;
            border-color: #3B82F6;
            outline: none;
        }
        .table-row {
            transition: background-color 0.2s ease;
        }
        .table-row:hover {
            background-color: #F9FAFB;
        }
        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3B82F6;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .property-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }
        .roi-positive {
            color: #059669;
        }
        .roi-negative {
            color: #DC2626;
        }
        .search-dropdown {
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #E5E7EB;
            border-radius: 8px;
            background: white;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #6B7280;
        }
        .modal {
            backdrop-filter: blur(8px);
        }
        .animate-fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .card-action-btn {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            border: 1px solid transparent;
        }
        .card-action-btn:hover {
            transform: scale(1.1);
            border-color: currentColor;
            background: currentColor;
            color: white !important;
        }
        .asset-card-buttons {
            display: flex;
            gap: 8px;
        }
        .asset-card-buttons button {
            flex: 1;
            height: 40px;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }
        .asset-card-buttons button:hover {
            transform: translateY(-1px);
        }
        .progress-bar {
            height: 6px;
            border-radius: 3px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            border-radius: 3px;
            transition: width 0.3s ease;
        }
        /* 进度相关样式 */
        .progress-step {
            position: relative;
            padding-left: 40px;
        }

        .progress-step::before {
            content: '';
            position: absolute;
            left: 11px;
            top: 28px;
            bottom: -20px;
            width: 2px;
            background: #E5E7EB;
        }

        .progress-step:last-child::before {
            display: none;
        }

        .progress-step-icon {
            position: absolute;
            left: 0;
            top: 0;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }

        .progress-step-icon.completed {
            background: #10B981;
            color: white;
        }

        .progress-step-icon.in-progress {
            background: #3B82F6;
            color: white;
        }

        .progress-step-icon.pending {
            background: #E5E7EB;
            color: #6B7280;
        }

        .progress-mini-bar {
            height: 4px;
            background: #E5E7EB;
            border-radius: 2px;
            overflow: hidden;
            margin-top: 8px;
        }

        .progress-mini-fill {
            height: 100%;
            background: #3B82F6;
            border-radius: 2px;
            transition: width 0.3s ease;
        }

        .toast {
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .modal-backdrop {
            backdrop-filter: blur(4px);
        }

        /* 文件上传相关样式 */
        .upload-zone {
            border: 2px dashed #D1D5DB;
            border-radius: 12px;
            padding: 32px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            background: #F9FAFB;
        }

        .upload-zone:hover {
            border-color: #3B82F6;
            background: #EFF6FF;
        }

        .upload-zone.drag-over {
            border-color: #3B82F6;
            background: #DBEAFE;
            transform: scale(1.02);
        }

        .file-item {
            background: #F3F4F6;
            border: 1px solid #E5E7EB;
            border-radius: 8px;
            padding: 12px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: all 0.2s ease;
        }

        .file-item:hover {
            background: white;
            border-color: #D1D5DB;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .file-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .file-icon.pdf { background: #FEE2E2; color: #DC2626; }
        .file-icon.image { background: #DBEAFE; color: #3B82F6; }
        .file-icon.doc { background: #E0E7FF; color: #4338CA; }
        .file-icon.other { background: #F3F4F6; color: #6B7280; }

        .upload-progress {
            height: 4px;
            background: #E5E7EB;
            border-radius: 2px;
            overflow: hidden;
            margin-top: 8px;
        }

        .upload-progress-bar {
            height: 100%;
            background: #3B82F6;
            border-radius: 2px;
            transition: width 0.3s ease;
        }

        .requirement-item {
            background: #FEF3C7;
            border: 1px solid #FDE68A;
            border-radius: 8px;
            padding: 12px;
            display: flex;
            align-items: start;
            gap: 12px;
        }

        .requirement-item.completed {
            background: #DCFCE7;
            border-color: #BBF7D0;
        }

        .file-status-badge {
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
        }

        .file-status-badge.required { background: #FEE2E2; color: #DC2626; }
        .file-status-badge.optional { background: #F3F4F6; color: #6B7280; }
        .file-status-badge.uploaded { background: #DCFCE7; color: #15803D; }

    </style>
</head>
<body class="bg-gray-50">
    <!-- 顶部导航栏 -->
    <nav class="bg-white shadow-sm border-b border-gray-200 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-6">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-4">
                    <div class="flex items-center space-x-3">
                        <div class="w-10 h-10 gradient-bg rounded-xl flex items-center justify-center">
                            <i class="fas fa-building text-white text-lg"></i>
                        </div>
                        <div>
                            <span class="text-xl font-bold text-gray-900">PropertyChain</span>
                            <div class="text-xs text-gray-500">资产管理平台</div>
                        </div>
                    </div>
                </div>

                <!-- 中间导航 -->
                <div class="hidden md:flex items-center space-x-8">
                    <a href="asset-manager-dashboard.html" class="text-gray-600 hover:text-gray-900 pb-4">仪表盘</a>
                    <a href="#" class="text-blue-600 font-medium border-b-2 border-blue-600 pb-4">资产管理</a>
                    <a href="#" class="text-gray-600 hover:text-gray-900 pb-4">代币化</a>
                    <a href="#" class="text-gray-600 hover:text-gray-900 pb-4">文档管理</a>
                    <a href="#" class="text-gray-600 hover:text-gray-900 pb-4">收益报告</a>
                </div>

                <div class="flex items-center space-x-4">
                    <!-- 通知 -->
                    <button class="relative p-2 text-gray-500 hover:text-gray-700">
                        <i class="fas fa-bell text-lg"></i>
                        <span class="absolute -top-1 -right-1 h-5 w-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center">5</span>
                    </button>
                    
                    <!-- 用户信息 -->
                    <div class="flex items-center space-x-3">
                        <div class="text-right">
                            <div class="text-sm font-medium text-gray-900">万科地产</div>
                            <div class="text-xs text-gray-500">项目方</div>
                        </div>
                        <img src="https://images.unsplash.com/photo-1560250097-0b93528c311a?w=40&h=40&fit=crop" 
                             alt="公司logo" class="w-10 h-10 rounded-full border-2 border-gray-200">
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <div class="max-w-7xl mx-auto px-6 py-8">
        <!-- 页面标题和操作区域 -->
        <div class="flex items-center justify-between mb-8">
            <div>
                <h1 class="text-3xl font-bold text-gray-900">资产管理</h1>
                <p class="text-gray-600 mt-2">管理您的房地产资产组合，跟踪代币化进展和收益表现</p>
            </div>
            <div class="flex items-center space-x-3">
                <button onclick="exportData()" class="btn-secondary">
                    <i class="fas fa-download"></i>导出数据
                </button>
                <a href="asset-create3_2.html" class="btn-primary">
                    <i class="fas fa-plus"></i>新增资产
                </a>
            </div>
        </div>

        <!-- 资产统计卡片 -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <div class="bg-white rounded-xl p-6 border border-gray-200 card-hover">
                <div class="flex items-center justify-between mb-4">
                    <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                        <i class="fas fa-building text-blue-600 text-xl"></i>
                    </div>
                    <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full">总计</span>
                </div>
                <h3 class="text-sm font-medium text-gray-600 mb-1">资产总数</h3>
                <p class="text-2xl font-bold text-gray-900">23</p>
                <div class="flex items-center mt-2 space-x-2">
                    <span class="text-xs text-green-600">18个已代币化</span>
                    <span class="text-xs text-blue-600">•</span>
                    <span class="text-xs text-orange-600">5个处理中</span>
                </div>
            </div>

            <div class="bg-white rounded-xl p-6 border border-gray-200 card-hover">
                <div class="flex items-center justify-between mb-4">
                    <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                        <i class="fas fa-chart-line text-green-600 text-xl"></i>
                    </div>
                    <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full">总值</span>
                </div>
                <h3 class="text-sm font-medium text-gray-600 mb-1">资产总价值</h3>
                <p class="text-2xl font-bold text-gray-900">¥35.8亿</p>
                <div class="flex items-center mt-2 space-x-2">
                    <span class="text-xs text-green-600">+12.5%</span>
                    <span class="text-xs text-gray-500">较上月</span>
                </div>
            </div>

            <div class="bg-white rounded-xl p-6 border border-gray-200 card-hover">
                <div class="flex items-center justify-between mb-4">
                    <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center">
                        <i class="fas fa-coins text-purple-600 text-xl"></i>
                    </div>
                    <span class="text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded-full">收益</span>
                </div>
                <h3 class="text-sm font-medium text-gray-600 mb-1">月度收益</h3>
                <p class="text-2xl font-bold text-gray-900">¥2,680万</p>
                <div class="flex items-center mt-2 space-x-2">
                    <span class="text-xs text-green-600">7.2%</span>
                    <span class="text-xs text-gray-500">年化收益率</span>
                </div>
            </div>

            <div class="bg-white rounded-xl p-6 border border-gray-200 card-hover">
                <div class="flex items-center justify-between mb-4">
                    <div class="w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center">
                        <i class="fas fa-percentage text-orange-600 text-xl"></i>
                    </div>
                    <span class="text-xs bg-orange-100 text-orange-800 px-2 py-1 rounded-full">出租率</span>
                </div>
                <h3 class="text-sm font-medium text-gray-600 mb-1">平均出租率</h3>
                <p class="text-2xl font-bold text-gray-900">94.2%</p>
                <div class="flex items-center mt-2 space-x-2">
                    <span class="text-xs text-green-600">+2.3%</span>
                    <span class="text-xs text-gray-500">较上月</span>
                </div>
            </div>
        </div>

        <!-- 搜索和筛选区域 -->
        <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8">
            <!-- 第一行：搜索框和视图切换 -->
            <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0 mb-6">
                <!-- 搜索框 -->
                <div class="relative flex-1 max-w-md">
                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                        <i class="fas fa-search text-gray-400"></i>
                    </div>
                    <input type="text" id="searchInput" 
                           class="w-full search-input"
                           placeholder="搜索资产名称、地址或代币符号..."
                           onkeyup="searchAssets()">
                    <div id="searchSuggestions" class="absolute top-full left-0 right-0 mt-1 search-dropdown hidden z-10">
                        <!-- 搜索建议将在这里显示 -->
                    </div>
                </div>

                <!-- 视图切换按钮 -->
                <div class="view-toggle">
                    <button id="cardViewBtn" class="active" onclick="switchView('card')">
                        <i class="fas fa-th-large mr-2"></i>卡片视图
                    </button>
                    <button id="tableViewBtn" onclick="switchView('table')">
                        <i class="fas fa-list mr-2"></i>列表视图
                    </button>
                </div>
            </div>

            <!-- 第二行：筛选按钮 -->
            <div class="flex flex-wrap items-center justify-between gap-4">
                <!-- 状态筛选 -->
                <div class="flex flex-wrap items-center gap-3">
                    <button class="filter-chip active" data-filter="all" onclick="filterAssets('all')">
                        <i class="fas fa-list mr-2"></i>全部资产
                    </button>
                    <button class="filter-chip" data-filter="tokenized" onclick="filterAssets('tokenized')">
                        <i class="fas fa-coins mr-2"></i>已代币化
                    </button>
                    <button class="filter-chip" data-filter="in-progress" onclick="filterAssets('in-progress')">
                        <i class="fas fa-clock mr-2"></i>处理中
                    </button>
                    <button class="filter-chip" data-filter="pending" onclick="filterAssets('pending')">
                        <i class="fas fa-hourglass-half mr-2"></i>待审核
                    </button>
                    <button class="filter-chip" data-filter="draft" onclick="filterAssets('draft')">
                        <i class="fas fa-edit mr-2"></i>草稿
                    </button>
                </div>

                <!-- 高级筛选 -->
                <div class="flex items-center space-x-3">
                    <select id="cityFilter" class="select-input" onchange="applyFilters()">
                        <option value="">所有城市</option>
                        <option value="shanghai">上海</option>
                        <option value="beijing">北京</option>
                        <option value="shenzhen">深圳</option>
                        <option value="guangzhou">广州</option>
                        <option value="hangzhou">杭州</option>
                    </select>
                    <select id="typeFilter" class="select-input" onchange="applyFilters()">
                        <option value="">所有类型</option>
                        <option value="office">写字楼</option>
                        <option value="retail">零售商业</option>
                        <option value="residential">住宅</option>
                        <option value="mixed">综合体</option>
                    </select>
                    <button onclick="resetFilters()" class="btn-secondary">
                        <i class="fas fa-undo"></i>重置
                    </button>
                </div>
            </div>
        </div>

        <!-- 资产列表 -->
        <div id="assetsContainer">
            <!-- 卡片视图 -->
            <div id="cardView" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" style="grid-auto-rows: 1fr;">
                <!-- 资产卡片1 - 已代币化 -->
                <div class="asset-card animate-fade-in" data-status="tokenized" data-city="shanghai" data-type="office">
                    <div class="relative">
                        <img src="https://picsum.photos/400/200?random=1" 
                             alt="上海静安嘉里中心" class="property-image">
                        <div class="absolute top-4 right-4">
                            <span class="status-badge status-tokenized">已代币化</span>
                        </div>
                        <div class="absolute bottom-4 left-4">
                            <span class="bg-black bg-opacity-60 text-white px-3 py-1 rounded-lg text-sm font-medium">
                                <i class="fas fa-map-marker-alt mr-1"></i>上海
                            </span>
                        </div>
                    </div>
                    <div class="asset-card-content">
                        <div class="asset-card-info">
                            <div class="flex items-start justify-between mb-4">
                                <div class="flex-1">
                                    <h3 class="text-lg font-bold text-gray-900 mb-1">上海静安嘉里中心</h3>
                                    <p class="text-sm text-gray-600">写字楼 · 32,000㎡</p>
                                </div>
                                <div class="flex items-center space-x-1 ml-3">
                                    <button onclick="viewAsset(1)" class="card-action-btn text-blue-600 hover:text-blue-600">
                                        <i class="fas fa-eye text-sm"></i>
                                    </button>
                                    <button onclick="editAsset(1)" class="card-action-btn text-green-600 hover:text-green-600">
                                        <i class="fas fa-edit text-sm"></i>
                                    </button>
                                    <button onclick="deleteAsset(1)" class="card-action-btn text-red-600 hover:text-red-600">
                                        <i class="fas fa-trash text-sm"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="space-y-3 mb-5">
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">资产价值</span>
                                    <span class="text-sm font-semibold text-gray-900">¥2.78亿</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">代币价格</span>
                                    <span class="text-sm font-semibold text-gray-900">¥0.87</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">年化收益</span>
                                    <span class="text-sm font-semibold roi-positive">+7.2%</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">出租率</span>
                                    <span class="text-sm font-semibold text-gray-900">98.5%</span>
                                </div>
                            </div>

                            <div class="mb-5">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-sm text-gray-600">代币流通</span>
                                    <span class="text-sm font-medium text-gray-900">3,200万/3,200万</span>
                                </div>
                                <div class="progress-bar bg-gray-200">
                                    <div class="progress-fill bg-green-500" style="width: 100%"></div>
                                </div>
                            </div>
                        </div>

                        <div class="asset-card-buttons mt-auto">
                            <button onclick="manageTokens(1)" class="bg-blue-600 text-white hover:bg-blue-700">
                                <i class="fas fa-coins"></i>管理代币
                            </button>
                            <button onclick="viewRevenue(1)" class="bg-green-600 text-white hover:bg-green-700">
                                <i class="fas fa-chart-line"></i>查看收益
                            </button>
                        </div>
                    </div>
                </div>

                <!-- 资产卡片2 - 处理中 -->
                <div class="asset-card animate-fade-in" data-status="in-progress" data-city="shenzhen" data-type="mixed">
                    <div class="relative">
                        <img src="https://picsum.photos/400/200?random=2" 
                             alt="深圳前海中心A座" class="property-image">
                        <div class="absolute top-4 right-4">
                            <span class="status-badge status-in-progress">链上映射中</span>
                        </div>
                        <div class="absolute bottom-4 left-4">
                            <span class="bg-black bg-opacity-60 text-white px-3 py-1 rounded-lg text-sm font-medium">
                                <i class="fas fa-map-marker-alt mr-1"></i>深圳
                            </span>
                        </div>
                    </div>
                    <div class="asset-card-content">
                        <div class="asset-card-info">
                            <div class="flex items-start justify-between mb-4">
                                <div class="flex-1">
                                    <h3 class="text-lg font-bold text-gray-900 mb-1">深圳前海中心A座</h3>
                                    <p class="text-sm text-gray-600">商业综合体 · 25,000㎡</p>
                                </div>
                                <div class="flex items-center space-x-1 ml-3">
                                    <button onclick="viewAsset(2)" class="card-action-btn text-blue-600 hover:text-blue-600">
                                        <i class="fas fa-eye text-sm"></i>
                                    </button>
                                    <button onclick="editAsset(2)" class="card-action-btn text-green-600 hover:text-green-600">
                                        <i class="fas fa-edit text-sm"></i>
                                    </button>
                                    <button onclick="deleteAsset(2)" class="card-action-btn text-red-600 hover:text-red-600">
                                        <i class="fas fa-trash text-sm"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="space-y-3 mb-5">
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">资产价值</span>
                                    <span class="text-sm font-semibold text-gray-900">¥3.8亿</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">预计代币价格</span>
                                    <span class="text-sm font-semibold text-gray-900">¥1.52</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">预期年化收益</span>
                                    <span class="text-sm font-semibold roi-positive">+6.8%</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">出租率</span>
                                    <span class="text-sm font-semibold text-gray-900">92.3%</span>
                                </div>
                            </div>

                            <div class="mb-5">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-sm text-gray-600">代币化进度</span>
                                    <span class="text-sm font-medium text-gray-900">83%</span>
                                </div>
                                <div class="progress-bar bg-gray-200">
                                    <div class="progress-fill bg-blue-500" style="width: 83%"></div>
                                </div>
                                <div class="mt-2 text-xs text-gray-500">
                                    <i class="fas fa-clock mr-1"></i>预计完成时间：7个工作日
                                </div>
                            </div>
                        </div>

                        <div class="asset-card-buttons mt-auto">
                            <button onclick="checkProgress(2)" class="bg-blue-600 text-white hover:bg-blue-700">
                                <i class="fas fa-search"></i>查看进度
                            </button>
                            <button onclick="accelerateProcess(2)" class="bg-orange-600 text-white hover:bg-orange-700">
                                <i class="fas fa-rocket"></i>加速处理
                            </button>
                        </div>
                    </div>
                </div>

                <!-- 资产卡片3 - 待审核 -->
                <div class="asset-card animate-fade-in" data-status="pending" data-city="hangzhou" data-type="retail" data-id="3">
                    <div class="relative">
                        <img src="https://picsum.photos/400/200?random=3" 
                             alt="杭州西溪印象城" class="property-image">
                        <div class="absolute top-4 right-4">
                            <span class="status-badge status-pending">待审核</span>
                        </div>
                        <div class="absolute bottom-4 left-4">
                            <span class="bg-black bg-opacity-60 text-white px-3 py-1 rounded-lg text-sm font-medium">
                                <i class="fas fa-map-marker-alt mr-1"></i>杭州
                            </span>
                        </div>
                    </div>
                    <div class="asset-card-content">
                        <div class="asset-card-info">
                            <div class="flex items-start justify-between mb-4">
                                <div class="flex-1">
                                    <h3 class="text-lg font-bold text-gray-900 mb-1">杭州西溪印象城</h3>
                                    <p class="text-sm text-gray-600">购物中心 · 18,500㎡</p>
                                </div>
                                <div class="flex items-center space-x-1 ml-3">
                                    <button onclick="viewAsset(3)" class="card-action-btn text-blue-600 hover:text-blue-600">
                                        <i class="fas fa-eye text-sm"></i>
                                    </button>
                                    <button onclick="editAsset(3)" class="card-action-btn text-green-600 hover:text-green-600">
                                        <i class="fas fa-edit text-sm"></i>
                                    </button>
                                    <button onclick="deleteAsset(3)" class="card-action-btn text-red-600 hover:text-red-600">
                                        <i class="fas fa-trash text-sm"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="space-y-3 mb-5">
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">资产价值</span>
                                    <span class="text-sm font-semibold text-gray-900">¥2.2亿</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">预计代币价格</span>
                                    <span class="text-sm font-semibold text-gray-900">¥0.88</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">预期年化收益</span>
                                    <span class="text-sm font-semibold roi-positive">+6.5%</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">出租率</span>
                                    <span class="text-sm font-semibold text-gray-900">89.7%</span>
                                </div>
                            </div>

                            <div class="mb-5">
                                <div class="bg-yellow-50 p-4 rounded-lg border border-yellow-200">
                                    <div class="flex items-center space-x-2">
                                        <i class="fas fa-exclamation-triangle text-yellow-600"></i>
                                        <span class="text-sm font-medium text-yellow-800">缺少文件</span>
                                    </div>
                                    <p class="text-xs text-yellow-700 mt-1">
                                        土地使用证需要补充上传
                                    </p>
                                </div>
                            </div>
                        </div>

                        <div class="asset-card-buttons mt-auto">
                            <button onclick="uploadDocuments(3)" class="bg-red-600 text-white hover:bg-red-700">
                                <i class="fas fa-upload"></i>补充文件
                            </button>
                            <button onclick="contactSupport(3)" class="bg-gray-600 text-white hover:bg-gray-700">
                                <i class="fas fa-headset"></i>联系客服
                            </button>
                        </div>
                    </div>
                </div>

                <!-- 资产卡片4 - 北京国贸中心 -->
                <div class="asset-card animate-fade-in" data-status="tokenized" data-city="beijing" data-type="office">
                    <div class="relative">
                        <img src="https://picsum.photos/400/200?random=4" 
                             alt="北京国贸中心" class="property-image">
                        <div class="absolute top-4 right-4">
                            <span class="status-badge status-tokenized">已代币化</span>
                        </div>
                        <div class="absolute bottom-4 left-4">
                            <span class="bg-black bg-opacity-60 text-white px-3 py-1 rounded-lg text-sm font-medium">
                                <i class="fas fa-map-marker-alt mr-1"></i>北京
                            </span>
                        </div>
                    </div>
                    <div class="asset-card-content">
                        <div class="asset-card-info">
                            <div class="flex items-start justify-between mb-4">
                                <div class="flex-1">
                                    <h3 class="text-lg font-bold text-gray-900 mb-1">北京国贸中心</h3>
                                    <p class="text-sm text-gray-600">写字楼 · 28,000㎡</p>
                                </div>
                                <div class="flex items-center space-x-1 ml-3">
                                    <button onclick="viewAsset(4)" class="card-action-btn text-blue-600 hover:text-blue-600">
                                        <i class="fas fa-eye text-sm"></i>
                                    </button>
                                    <button onclick="editAsset(4)" class="card-action-btn text-green-600 hover:text-green-600">
                                        <i class="fas fa-edit text-sm"></i>
                                    </button>
                                    <button onclick="deleteAsset(4)" class="card-action-btn text-red-600 hover:text-red-600">
                                        <i class="fas fa-trash text-sm"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="space-y-3 mb-5">
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">资产价值</span>
                                    <span class="text-sm font-semibold text-gray-900">¥4.2亿</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">代币价格</span>
                                    <span class="text-sm font-semibold text-gray-900">¥1.05</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">年化收益</span>
                                    <span class="text-sm font-semibold roi-positive">+8.1%</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">出租率</span>
                                    <span class="text-sm font-semibold text-gray-900">96.2%</span>
                                </div>
                            </div>

                            <div class="mb-5">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-sm text-gray-600">代币流通</span>
                                    <span class="text-sm font-medium text-gray-900">4,000万/4,000万</span>
                                </div>
                                <div class="progress-bar bg-gray-200">
                                    <div class="progress-fill bg-green-500" style="width: 100%"></div>
                                </div>
                            </div>
                        </div>

                        <div class="asset-card-buttons mt-auto">
                            <button onclick="manageTokens(4)" class="bg-blue-600 text-white hover:bg-blue-700">
                                <i class="fas fa-coins"></i>管理代币
                            </button>
                            <button onclick="viewRevenue(4)" class="bg-green-600 text-white hover:bg-green-700">
                                <i class="fas fa-chart-line"></i>查看收益
                            </button>
                        </div>
                    </div>
                </div>

                <!-- 资产卡片5 - 广州天河城 -->
                <div class="asset-card animate-fade-in" data-status="tokenized" data-city="guangzhou" data-type="retail">
                    <div class="relative">
                        <img src="https://picsum.photos/400/200?random=5" 
                             alt="广州天河城" class="property-image">
                        <div class="absolute top-4 right-4">
                            <span class="status-badge status-tokenized">已代币化</span>
                        </div>
                        <div class="absolute bottom-4 left-4">
                            <span class="bg-black bg-opacity-60 text-white px-3 py-1 rounded-lg text-sm font-medium">
                                <i class="fas fa-map-marker-alt mr-1"></i>广州
                            </span>
                        </div>
                    </div>
                    <div class="asset-card-content">
                        <div class="asset-card-info">
                            <div class="flex items-start justify-between mb-4">
                                <div class="flex-1">
                                    <h3 class="text-lg font-bold text-gray-900 mb-1">广州天河城</h3>
                                    <p class="text-sm text-gray-600">购物中心 · 35,000㎡</p>
                                </div>
                                <div class="flex items-center space-x-1 ml-3">
                                    <button onclick="viewAsset(5)" class="card-action-btn text-blue-600 hover:text-blue-600">
                                        <i class="fas fa-eye text-sm"></i>
                                    </button>
                                    <button onclick="editAsset(5)" class="card-action-btn text-green-600 hover:text-green-600">
                                        <i class="fas fa-edit text-sm"></i>
                                    </button>
                                    <button onclick="deleteAsset(5)" class="card-action-btn text-red-600 hover:text-red-600">
                                        <i class="fas fa-trash text-sm"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="space-y-3 mb-5">
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">资产价值</span>
                                    <span class="text-sm font-semibold text-gray-900">¥5.6亿</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">代币价格</span>
                                    <span class="text-sm font-semibold text-gray-900">¥1.12</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">年化收益</span>
                                    <span class="text-sm font-semibold roi-positive">+7.8%</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">出租率</span>
                                    <span class="text-sm font-semibold text-gray-900">94.8%</span>
                                </div>
                            </div>

                            <div class="mb-5">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-sm text-gray-600">代币流通</span>
                                    <span class="text-sm font-medium text-gray-900">5,000万/5,000万</span>
                                </div>
                                <div class="progress-bar bg-gray-200">
                                    <div class="progress-fill bg-green-500" style="width: 100%"></div>
                                </div>
                            </div>
                        </div>

                        <div class="asset-card-buttons mt-auto">
                            <button onclick="manageTokens(5)" class="bg-blue-600 text-white hover:bg-blue-700">
                                <i class="fas fa-coins"></i>管理代币
                            </button>
                            <button onclick="viewRevenue(5)" class="bg-green-600 text-white hover:bg-green-700">
                                <i class="fas fa-chart-line"></i>查看收益
                            </button>
                        </div>
                    </div>
                </div>

                <!-- 资产卡片6 - 草稿状态 -->
                <div class="asset-card animate-fade-in" data-status="draft" data-city="shanghai" data-type="office">
                    <div class="relative">
                        <img src="https://picsum.photos/400/200?random=6" 
                             alt="上海IFC国际金融中心" class="property-image">
                        <div class="absolute top-4 right-4">
                            <span class="status-badge status-draft">草稿</span>
                        </div>
                        <div class="absolute bottom-4 left-4">
                            <span class="bg-black bg-opacity-60 text-white px-3 py-1 rounded-lg text-sm font-medium">
                                <i class="fas fa-map-marker-alt mr-1"></i>上海
                            </span>
                        </div>
                    </div>
                    <div class="asset-card-content">
                        <div class="asset-card-info">
                            <div class="flex items-start justify-between mb-4">
                                <div class="flex-1">
                                    <h3 class="text-lg font-bold text-gray-900 mb-1">上海IFC国际金融中心</h3>
                                    <p class="text-sm text-gray-600">写字楼 · 45,000㎡</p>
                                </div>
                                <div class="flex items-center space-x-1 ml-3">
                                    <button onclick="viewAsset(6)" class="card-action-btn text-blue-600 hover:text-blue-600">
                                        <i class="fas fa-eye text-sm"></i>
                                    </button>
                                    <button onclick="editAsset(6)" class="card-action-btn text-green-600 hover:text-green-600">
                                        <i class="fas fa-edit text-sm"></i>
                                    </button>
                                    <button onclick="deleteAsset(6)" class="card-action-btn text-red-600 hover:text-red-600">
                                        <i class="fas fa-trash text-sm"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="space-y-3 mb-5">
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">资产价值</span>
                                    <span class="text-sm font-semibold text-gray-900">¥6.8亿</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">预计代币价格</span>
                                    <span class="text-sm font-semibold text-gray-900">¥1.36</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">预期年化收益</span>
                                    <span class="text-sm font-semibold roi-positive">+7.5%</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">出租率</span>
                                    <span class="text-sm font-semibold text-gray-900">91.2%</span>
                                </div>
                            </div>

                            <div class="mb-5">
                                <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                                    <div class="flex items-center space-x-2">
                                        <i class="fas fa-edit text-gray-600"></i>
                                        <span class="text-sm font-medium text-gray-800">信息填写中</span>
                                    </div>
                                    <p class="text-xs text-gray-600 mt-1">
                                        完成度：65%，最后编辑：2小时前
                                    </p>
                                </div>
                            </div>
                        </div>

                        <div class="asset-card-buttons mt-auto">
                            <button onclick="continueDraft(6)" class="bg-blue-600 text-white hover:bg-blue-700">
                                <i class="fas fa-edit"></i>继续编辑
                            </button>
                            <button onclick="deleteDraft(6)" class="bg-red-600 text-white hover:bg-red-700">
                                <i class="fas fa-trash"></i>删除草稿
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 列表视图 -->
            <div id="tableView" class="hidden">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">资产信息</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">位置</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">类型</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">状态</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">资产价值</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">年化收益</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">出租率</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">操作</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                <tr class="table-row" data-status="tokenized" data-city="shanghai" data-type="office">
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <img src="https://picsum.photos/50/50?random=1" 
                                                 alt="上海静安嘉里中心" class="w-12 h-12 rounded-lg object-cover">
                                            <div class="ml-4">
                                                <div class="text-sm font-medium text-gray-900">上海静安嘉里中心</div>
                                                <div class="text-sm text-gray-500">32,000㎡</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">上海</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">写字楼</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="status-badge status-tokenized">已代币化</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">¥2.78亿</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm roi-positive">+7.2%</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">98.5%</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                        <div class="flex items-center space-x-2">
                                            <button onclick="viewAsset(1)" class="text-blue-600 hover:text-blue-800">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                            <button onclick="editAsset(1)" class="text-green-600 hover:text-green-800">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button onclick="deleteAsset(1)" class="text-red-600 hover:text-red-800">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr class="table-row" data-status="in-progress" data-city="shenzhen" data-type="mixed">
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <img src="https://picsum.photos/50/50?random=2" 
                                                 alt="深圳前海中心A座" class="w-12 h-12 rounded-lg object-cover">
                                            <div class="ml-4">
                                                <div class="text-sm font-medium text-gray-900">深圳前海中心A座</div>
                                                <div class="text-sm text-gray-500">25,000㎡</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">深圳</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">商业综合体</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="status-badge status-in-progress">链上映射中</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">¥3.8亿</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm roi-positive">+6.8%</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">92.3%</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                        <div class="flex items-center space-x-2">
                                            <button onclick="viewAsset(2)" class="text-blue-600 hover:text-blue-800">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                            <button onclick="editAsset(2)" class="text-green-600 hover:text-green-800">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button onclick="deleteAsset(2)" class="text-red-600 hover:text-red-800">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr class="table-row" data-status="pending" data-city="hangzhou" data-type="retail">
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <img src="https://picsum.photos/50/50?random=3" 
                                                 alt="杭州西溪印象城" class="w-12 h-12 rounded-lg object-cover">
                                            <div class="ml-4">
                                                <div class="text-sm font-medium text-gray-900">杭州西溪印象城</div>
                                                <div class="text-sm text-gray-500">18,500㎡</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">杭州</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">购物中心</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="status-badge status-pending">待审核</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">¥2.2亿</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm roi-positive">+6.5%</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">89.7%</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                        <div class="flex items-center space-x-2">
                                            <button onclick="viewAsset(3)" class="text-blue-600 hover:text-blue-800">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                            <button onclick="editAsset(3)" class="text-green-600 hover:text-green-800">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button onclick="deleteAsset(3)" class="text-red-600 hover:text-red-800">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr class="table-row" data-status="tokenized" data-city="beijing" data-type="office">
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <img src="https://picsum.photos/50/50?random=4" 
                                                 alt="北京国贸中心" class="w-12 h-12 rounded-lg object-cover">
                                            <div class="ml-4">
                                                <div class="text-sm font-medium text-gray-900">北京国贸中心</div>
                                                <div class="text-sm text-gray-500">28,000㎡</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">北京</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">写字楼</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="status-badge status-tokenized">已代币化</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">¥4.2亿</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm roi-positive">+8.1%</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">96.2%</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                        <div class="flex items-center space-x-2">
                                            <button onclick="viewAsset(4)" class="text-blue-600 hover:text-blue-800">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                            <button onclick="editAsset(4)" class="text-green-600 hover:text-green-800">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button onclick="deleteAsset(4)" class="text-red-600 hover:text-red-800">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr class="table-row" data-status="tokenized" data-city="guangzhou" data-type="retail">
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <img src="https://picsum.photos/50/50?random=5" 
                                                 alt="广州天河城" class="w-12 h-12 rounded-lg object-cover">
                                            <div class="ml-4">
                                                <div class="text-sm font-medium text-gray-900">广州天河城</div>
                                                <div class="text-sm text-gray-500">35,000㎡</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">广州</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">购物中心</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="status-badge status-tokenized">已代币化</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">¥5.6亿</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm roi-positive">+7.8%</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">94.8%</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                        <div class="flex items-center space-x-2">
                                            <button onclick="viewAsset(5)" class="text-blue-600 hover:text-blue-800">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                            <button onclick="editAsset(5)" class="text-green-600 hover:text-green-800">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button onclick="deleteAsset(5)" class="text-red-600 hover:text-red-800">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr class="table-row" data-status="draft" data-city="shanghai" data-type="office">
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <img src="https://picsum.photos/50/50?random=6" 
                                                 alt="上海IFC国际金融中心" class="w-12 h-12 rounded-lg object-cover">
                                            <div class="ml-4">
                                                <div class="text-sm font-medium text-gray-900">上海IFC国际金融中心</div>
                                                <div class="text-sm text-gray-500">45,000㎡</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">上海</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">写字楼</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="status-badge status-draft">草稿</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">¥6.8亿</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm roi-positive">+7.5%</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">91.2%</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                        <div class="flex items-center space-x-2">
                                            <button onclick="viewAsset(6)" class="text-blue-600 hover:text-blue-800">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                            <button onclick="editAsset(6)" class="text-green-600 hover:text-green-800">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button onclick="deleteAsset(6)" class="text-red-600 hover:text-red-800">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- 分页 -->
        <div class="flex items-center justify-between mt-8">
            <div class="text-sm text-gray-500">
                显示 1-6 条，共 23 条记录
            </div>
            <nav class="flex space-x-2">
                <button class="px-3 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                    上一页
                </button>
                <button class="px-3 py-2 text-sm bg-blue-600 text-white rounded-lg">1</button>
                <button class="px-3 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">2</button>
                <button class="px-3 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">3</button>
                <button class="px-3 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">
                    下一页
                </button>
            </nav>
        </div>
    </div>

    <!-- 进度详情模态框 -->
    <div id="progressModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-xl p-6 m-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto animate-fade-in">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-xl font-semibold text-gray-900">
                    <i class="fas fa-tasks text-blue-600 mr-2"></i>代币化进度详情
                </h3>
                <button onclick="closeProgressModal()" class="text-gray-500 hover:text-gray-700 transition-colors">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            
            <div id="progressContent">
                <!-- 动态内容将在这里插入 -->
            </div>
        </div>
    </div>

    <!-- 加速处理模态框 -->
    <div id="accelerateModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-xl p-6 m-6 max-w-md w-full animate-fade-in">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-lg font-semibold text-gray-900">
                    <i class="fas fa-rocket text-orange-600 mr-2"></i>加速处理
                </h3>
                <button onclick="closeAccelerateModal()" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="space-y-4">
                <div class="bg-orange-50 border border-orange-200 p-4 rounded-lg">
                    <p class="text-sm text-orange-800">
                        <i class="fas fa-info-circle mr-1"></i>
                        加速处理需要额外支付服务费用，可将处理时间缩短至2-3个工作日。
                    </p>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">选择加速方案</label>
                    <div class="space-y-2">
                        <label class="flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer">
                            <input type="radio" name="accelerate" value="standard" class="mr-3">
                            <div class="flex-1">
                                <p class="font-medium text-gray-900">标准加速</p>
                                <p class="text-xs text-gray-500">3个工作日完成 · 费用：¥5,000</p>
                            </div>
                        </label>
                        <label class="flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer">
                            <input type="radio" name="accelerate" value="express" class="mr-3">
                            <div class="flex-1">
                                <p class="font-medium text-gray-900">极速处理</p>
                                <p class="text-xs text-gray-500">2个工作日完成 · 费用：¥10,000</p>
                            </div>
                        </label>
                    </div>
                </div>
                
                <div class="flex space-x-3">
                    <button onclick="closeAccelerateModal()" class="flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50">
                        取消
                    </button>
                    <button onclick="confirmAccelerate()" class="flex-1 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700">
                        确认加速
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast提示 -->
    <div id="toastContainer" class="fixed top-4 right-4 z-50 space-y-2"></div>
    
    <!-- 补充文件模态框 -->
    <div id="uploadDocumentsModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-xl p-6 m-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto animate-fade-in">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-xl font-semibold text-gray-900">
                    <i class="fas fa-upload text-red-600 mr-2"></i>补充文件
                </h3>
                <button onclick="closeUploadModal()" class="text-gray-500 hover:text-gray-700 transition-colors">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            
            <div id="uploadContent">
                <!-- 动态内容将在这里插入 -->
            </div>
        </div>
    </div>

    <!-- 文件预览模态框 -->
    <div id="filePreviewModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-xl p-6 m-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto animate-fade-in">
            <div class="flex items-center justify-between mb-4">
                <h3 class="text-lg font-semibold text-gray-900">文件预览</h3>
                <button onclick="closeFilePreview()" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <div id="filePreviewContent">
                <!-- 预览内容 -->
            </div>
        </div>
    </div>

    <script>
        let currentView = 'card';
        let currentFilter = 'all';
        let deleteAssetId = null;

        let currentAssetId = null;

        let currentUploadAssetId = null;
        let uploadedFiles = {};
        let dragCounter = 0;

        // 切换视图
        function switchView(view) {
            currentView = view;
            
            // 更新按钮状态
            document.getElementById('cardViewBtn').classList.toggle('active', view === 'card');
            document.getElementById('tableViewBtn').classList.toggle('active', view === 'table');
            
            // 切换视图
            document.getElementById('cardView').classList.toggle('hidden', view !== 'card');
            document.getElementById('tableView').classList.toggle('hidden', view !== 'table');
        }

        // 筛选资产
        function filterAssets(filter) {
            currentFilter = filter;
            
            // 更新筛选按钮状态
            document.querySelectorAll('.filter-chip').forEach(chip => {
                chip.classList.toggle('active', chip.dataset.filter === filter);
            });
            
            // 显示/隐藏资产
            const cards = document.querySelectorAll('.asset-card');
            const rows = document.querySelectorAll('.table-row');
            
            cards.forEach(card => {
                const shouldShow = filter === 'all' || card.dataset.status === filter;
                card.style.display = shouldShow ? 'block' : 'none';
            });
            
            rows.forEach(row => {
                const shouldShow = filter === 'all' || row.dataset.status === filter;
                row.style.display = shouldShow ? 'table-row' : 'none';
            });
        }

        // 其他函数保持不变...
        function applyFilters() {
            // 实现逻辑
        }

        function resetFilters() {
            // 实现逻辑
        }

        function searchAssets() {
            // 实现逻辑
        }

        function viewAsset(id) {
            alert(`查看资产 ${id}`);
        }

        function editAsset(id) {
            alert(`编辑资产 ${id}`);
        }

        function deleteAsset(id) {
            alert(`删除资产 ${id}`);
        }

        function manageTokens(id) {
            alert(`管理资产 ${id} 的代币`);
        }

        function viewRevenue(id) {
            alert(`查看资产 ${id} 的收益`);
        }



        // 改进的查看进度函数
        function checkProgress(id) {
            currentAssetId = id;
            
            // 显示模态框
            const modal = document.getElementById('progressModal');
            modal.classList.remove('hidden');
            modal.classList.add('flex', 'modal-backdrop');
            
            // 获取进度数据
            const progressData = getProgressData(id);
            
            // 渲染内容
            renderProgressContent(progressData);
        }

        // 获取进度数据
        function getProgressData(id) {
            // 模拟API调用，实际应该从后端获取
            const mockData = {
                2: { // 深圳前海中心的数据
                    id: 2,
                    name: '深圳前海中心A座',
                    type: '商业综合体',
                    area: '25,000㎡',
                    value: '¥3.8亿',
                    image: 'https://picsum.photos/400/200?random=2',
                    totalProgress: 83,
                    estimatedCompletion: '7个工作日',
                    startDate: '2024-01-08',
                    currentPhase: '链上映射',
                    steps: [
                        {
                            id: 1,
                            title: '资产评估',
                            description: '专业机构对资产进行估值评估',
                            status: 'completed',
                            completedDate: '2024-01-10',
                            progress: 100,
                            duration: '2天',
                            responsible: '仲量联行'
                        },
                        {
                            id: 2,
                            title: '法律合规审查',
                            description: '审查所有法律文件和产权证明',
                            status: 'completed',
                            completedDate: '2024-01-12',
                            progress: 100,
                            duration: '2天',
                            responsible: '金杜律师事务所'
                        },
                        {
                            id: 3,
                            title: '智能合约开发',
                            description: '开发和测试ERC-1400标准智能合约',
                            status: 'completed',
                            completedDate: '2024-01-14',
                            progress: 100,
                            duration: '2天',
                            responsible: '技术团队'
                        },
                        {
                            id: 4,
                            title: '链上映射',
                            description: '将资产信息映射到区块链',
                            status: 'in-progress',
                            progress: 65,
                            startDate: '2024-01-15',
                            estimatedDays: 3,
                            responsible: '区块链团队',
                            subTasks: [
                                { name: '数据准备', completed: true },
                                { name: '合约部署', completed: true },
                                { name: '数据上链', completed: false },
                                { name: '验证测试', completed: false }
                            ]
                        },
                        {
                            id: 5,
                            title: '监管备案',
                            description: '向监管机构提交备案材料',
                            status: 'pending',
                            estimatedDays: 2,
                            responsible: '合规团队'
                        },
                        {
                            id: 6,
                            title: '代币发行',
                            description: '正式发行代币并开放交易',
                            status: 'pending',
                            estimatedDays: 1,
                            responsible: '运营团队'
                        }
                    ],
                    timeline: {
                        totalDays: 12,
                        completedDays: 6,
                        remainingDays: 6
                    }
                },
                // 可以添加其他资产的模拟数据
            };
            
            return mockData[id] || {};
        }

        // 渲染进度内容
        function renderProgressContent(data) {
            const content = document.getElementById('progressContent');
            
            content.innerHTML = `
                <!-- 资产信息卡片 -->
                <div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 mb-6">
                    <div class="flex items-center space-x-4">
                        <img src="${data.image}" alt="${data.name}" 
                            class="w-20 h-20 rounded-lg object-cover shadow-md">
                        <div class="flex-1">
                            <h4 class="font-bold text-gray-900 text-lg">${data.name}</h4>
                            <p class="text-sm text-gray-600">${data.type} · ${data.area} · ${data.value}</p>
                            <div class="flex items-center space-x-4 mt-2">
                                <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full">
                                    <i class="fas fa-calendar-alt mr-1"></i>开始时间：${data.startDate}
                                </span>
                                <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full">
                                    <i class="fas fa-flag-checkered mr-1"></i>当前阶段：${data.currentPhase}
                                </span>
                            </div>
                        </div>
                        <div class="text-center">
                            <div class="relative w-20 h-20">
                                <svg class="w-20 h-20 transform -rotate-90">
                                    <circle cx="40" cy="40" r="36" stroke="#E5E7EB" stroke-width="8" fill="none"></circle>
                                    <circle cx="40" cy="40" r="36" stroke="#3B82F6" stroke-width="8" fill="none"
                                            stroke-dasharray="${226 * data.totalProgress / 100} 226"
                                            stroke-linecap="round"></circle>
                                </svg>
                                <div class="absolute inset-0 flex items-center justify-center">
                                    <span class="text-xl font-bold text-blue-600">${data.totalProgress}%</span>
                                </div>
                            </div>
                            <p class="text-xs text-gray-500 mt-1">总体进度</p>
                        </div>
                    </div>
                </div>
                
                <!-- 时间轴 -->
                <div class="bg-gray-50 rounded-lg p-4 mb-6">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-sm font-medium text-gray-700">预计完成时间</span>
                        <span class="text-sm font-bold text-blue-600">${data.estimatedCompletion}</span>
                    </div>
                    <div class="flex items-center space-x-4 text-xs text-gray-600">
                        <span><i class="fas fa-check-circle text-green-600 mr-1"></i>已完成 ${data.timeline.completedDays} 天</span>
                        <span><i class="fas fa-clock text-blue-600 mr-1"></i>剩余 ${data.timeline.remainingDays} 天</span>
                        <span><i class="fas fa-calendar text-gray-600 mr-1"></i>总计 ${data.timeline.totalDays} 天</span>
                    </div>
                </div>
                
                <!-- 详细步骤 -->
                <div class="space-y-4 mb-6">
                    <h5 class="font-semibold text-gray-900 flex items-center">
                        <i class="fas fa-list-check mr-2 text-blue-600"></i>处理步骤
                    </h5>
                    <div class="space-y-4">
                        ${data.steps.map((step, index) => renderProgressStep(step, index)).join('')}
                    </div>
                </div>
                
                <!-- 操作按钮 -->
                <div class="flex justify-between items-center pt-4 border-t border-gray-200">
                    <div class="flex items-center space-x-2">
                        <button onclick="refreshProgress()" class="text-sm text-blue-600 hover:text-blue-700">
                            <i class="fas fa-sync-alt mr-1"></i>刷新进度
                        </button>
                        <span class="text-xs text-gray-500">最后更新：刚刚</span>
                    </div>
                    <div class="flex space-x-3">
                        <button onclick="downloadProgressReport(${data.id})" 
                                class="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                            <i class="fas fa-download mr-2"></i>下载报告
                        </button>
                        <button onclick="contactSupport(${data.id})" 
                                class="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                            <i class="fas fa-headset mr-2"></i>联系客服
                        </button>
                        <button onclick="showAccelerateModal(${data.id})" 
                                class="px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors">
                            <i class="fas fa-rocket mr-2"></i>加速处理
                        </button>
                    </div>
                </div>
            `;
        }

        // 渲染单个步骤
        function renderProgressStep(step, index) {
            const statusConfig = {
                completed: {
                    bgColor: 'bg-green-50',
                    borderColor: 'border-green-200',
                    iconBg: 'completed',
                    icon: 'fa-check',
                    textColor: 'text-green-800',
                    statusText: '已完成'
                },
                'in-progress': {
                    bgColor: 'bg-blue-50',
                    borderColor: 'border-blue-200',
                    iconBg: 'in-progress',
                    icon: 'fa-spinner fa-spin',
                    textColor: 'text-blue-800',
                    statusText: '进行中'
                },
                pending: {
                    bgColor: 'bg-gray-50',
                    borderColor: 'border-gray-200',
                    iconBg: 'pending',
                    icon: 'fa-clock',
                    textColor: 'text-gray-600',
                    statusText: '待处理'
                }
            };
            
            const config = statusConfig[step.status];
            
            return `
                <div class="progress-step">
                    <div class="progress-step-icon ${config.iconBg}">
                        <i class="fas ${config.icon}"></i>
                    </div>
                    <div class="${config.bgColor} ${config.borderColor} border rounded-lg p-4 ml-8">
                        <div class="flex items-start justify-between">
                            <div class="flex-1">
                                <h6 class="font-medium text-gray-900">${step.title}</h6>
                                <p class="text-sm text-gray-600 mt-1">${step.description}</p>
                                
                                ${step.status === 'in-progress' && step.subTasks ? `
                                    <div class="mt-3 space-y-1">
                                        ${step.subTasks.map(task => `
                                            <div class="flex items-center space-x-2 text-xs">
                                                <i class="fas ${task.completed ? 'fa-check-square text-green-600' : 'fa-square text-gray-400'}"></i>
                                                <span class="${task.completed ? 'text-gray-600 line-through' : 'text-gray-700'}">${task.name}</span>
                                            </div>
                                        `).join('')}
                                    </div>
                                ` : ''}
                                
                                ${step.status === 'in-progress' ? `
                                    <div class="progress-mini-bar mt-3">
                                        <div class="progress-mini-fill" style="width: ${step.progress}%"></div>
                                    </div>
                                    <p class="text-xs text-gray-500 mt-1">${step.progress}% 完成</p>
                                ` : ''}
                                
                                <div class="flex items-center space-x-4 mt-2 text-xs text-gray-500">
                                    <span><i class="fas fa-user mr-1"></i>${step.responsible}</span>
                                    ${step.duration ? `<span><i class="fas fa-clock mr-1"></i>${step.duration}</span>` : ''}
                                    ${step.estimatedDays ? `<span><i class="fas fa-calendar mr-1"></i>预计${step.estimatedDays}天</span>` : ''}
                                </div>
                            </div>
                            <div class="text-right ml-4">
                                <span class="text-xs font-medium ${config.textColor}">${config.statusText}</span>
                                ${step.completedDate ? `<p class="text-xs text-gray-500 mt-1">${step.completedDate}</p>` : ''}
                                ${step.startDate && step.status === 'in-progress' ? `<p class="text-xs text-gray-500 mt-1">开始于 ${step.startDate}</p>` : ''}
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // 关闭进度模态框
        function closeProgressModal() {
            const modal = document.getElementById('progressModal');
            modal.classList.add('hidden');
            modal.classList.remove('flex', 'modal-backdrop');
            currentAssetId = null;
        }

        // 显示加速处理模态框
        function showAccelerateModal(id) {
            document.getElementById('accelerateModal').classList.remove('hidden');
            document.getElementById('accelerateModal').classList.add('flex');
        }

        // 关闭加速处理模态框
        function closeAccelerateModal() {
            document.getElementById('accelerateModal').classList.add('hidden');
            document.getElementById('accelerateModal').classList.remove('flex');
        }

        // 确认加速处理
        function confirmAccelerate() {
            const selectedOption = document.querySelector('input[name="accelerate"]:checked');
            if (!selectedOption) {
                showToast('请选择加速方案', 'warning');
                return;
            }
            
            closeAccelerateModal();
            showToast('加速处理申请已提交，我们将尽快为您处理', 'success');
            
            // 更新进度显示
            setTimeout(() => {
                if (currentAssetId) {
                    checkProgress(currentAssetId);
                }
            }, 1000);
        }

        // 刷新进度
        function refreshProgress() {
            const refreshBtn = event.target;
            const originalHTML = refreshBtn.innerHTML;
            refreshBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-1"></i>刷新中';
            refreshBtn.disabled = true;
            
            setTimeout(() => {
                refreshBtn.innerHTML = originalHTML;
                refreshBtn.disabled = false;
                showToast('进度已更新', 'success');
                
                // 重新加载进度数据
                if (currentAssetId) {
                    const progressData = getProgressData(currentAssetId);
                    renderProgressContent(progressData);
                }
            }, 1000);
        }

        // 下载进度报告
        function downloadProgressReport(id) {
            showToast('正在生成进度报告...', 'info');
            
            setTimeout(() => {
                showToast('进度报告已生成并开始下载', 'success');
                // 这里实际应该触发文件下载
            }, 1500);
        }

        // 联系客服
        function contactSupport(id) {
            showToast('正在为您连接客服...', 'info');
            
            setTimeout(() => {
                showToast('客服人员将在5分钟内与您联系', 'success');
            }, 1000);
        }

        // 显示Toast提示
        function showToast(message, type = 'info') {
            const toastContainer = document.getElementById('toastContainer');
            const toast = document.createElement('div');
            
            const bgColors = {
                success: 'bg-green-600',
                error: 'bg-red-600',
                warning: 'bg-yellow-600',
                info: 'bg-blue-600'
            };
            
            const icons = {
                success: 'fa-check-circle',
                error: 'fa-exclamation-circle',
                warning: 'fa-exclamation-triangle',
                info: 'fa-info-circle'
            };
            
            toast.className = `toast flex items-center px-6 py-3 rounded-lg text-white font-medium ${bgColors[type]} shadow-lg`;
            toast.innerHTML = `
                <i class="fas ${icons[type]} mr-2"></i>
                <span>${message}</span>
            `;
            
            toastContainer.appendChild(toast);
            
            setTimeout(() => {
                toast.style.animation = 'slideIn 0.3s ease-out reverse';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // 为accelerateProcess函数添加新的实现
        function accelerateProcess(id) {
            currentAssetId = id;
            showAccelerateModal(id);
        }

        // ESC键关闭模态框
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeProgressModal();
                closeAccelerateModal();
            }
        });

        // 点击模态框外部关闭
        document.getElementById('progressModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeProgressModal();
            }
        });

        document.getElementById('accelerateModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeAccelerateModal();
            }
        });



        // 改进的补充文件函数
        function uploadDocuments(id) {
            currentUploadAssetId = id;
            
            // 显示模态框
            const modal = document.getElementById('uploadDocumentsModal');
            modal.classList.remove('hidden');
            modal.classList.add('flex');
            
            // 获取资产数据和缺失文件信息
            const uploadData = getUploadRequirements(id);
            
            // 渲染上传界面
            renderUploadContent(uploadData);
        }

        // 获取上传要求数据
        function getUploadRequirements(id) {
            // 模拟API调用
            const mockData = {
                3: { // 杭州西溪印象城
                    id: 3,
                    name: '杭州西溪印象城',
                    type: '购物中心',
                    missingFiles: [
                        {
                            id: 'land_certificate',
                            name: '土地使用证',
                            description: '需要提供有效的土地使用权证明文件',
                            required: true,
                            status: 'missing',
                            acceptedFormats: ['.pdf', '.jpg', '.png'],
                            maxSize: '10MB'
                        },
                        {
                            id: 'fire_certificate',
                            name: '消防验收证明',
                            description: '建筑消防设施验收合格证明',
                            required: true,
                            status: 'missing',
                            acceptedFormats: ['.pdf', '.jpg', '.png'],
                            maxSize: '10MB'
                        },
                        {
                            id: 'env_assessment',
                            name: '环评报告',
                            description: '环境影响评价报告（可选）',
                            required: false,
                            status: 'missing',
                            acceptedFormats: ['.pdf'],
                            maxSize: '20MB'
                        }
                    ],
                    uploadedFiles: [
                        {
                            id: 'property_deed',
                            name: '产权证书',
                            fileName: '杭州西溪印象城产权证.pdf',
                            uploadDate: '2024-01-10',
                            size: '2.3MB',
                            status: 'verified'
                        },
                        {
                            id: 'construction_permit',
                            name: '建设工程规划许可证',
                            fileName: '建设许可证_20231215.pdf',
                            uploadDate: '2024-01-10',
                            size: '1.8MB',
                            status: 'verified'
                        }
                    ]
                }
            };
            
            return mockData[id] || {};
        }

        // 渲染上传内容
        function renderUploadContent(data) {
            const content = document.getElementById('uploadContent');
            
            content.innerHTML = `
                <!-- 资产信息 -->
                <div class="bg-orange-50 border border-orange-200 rounded-lg p-4 mb-6">
                    <div class="flex items-center space-x-3">
                        <i class="fas fa-exclamation-triangle text-orange-600 text-xl"></i>
                        <div>
                            <h4 class="font-medium text-orange-900">${data.name}</h4>
                            <p class="text-sm text-orange-700 mt-1">
                                请补充以下缺失的文件以完成代币化审核流程
                            </p>
                        </div>
                    </div>
                </div>
                
                <!-- 缺失文件列表 -->
                <div class="mb-6">
                    <h4 class="font-medium text-gray-900 mb-3 flex items-center">
                        <i class="fas fa-file-excel text-red-600 mr-2"></i>
                        缺失文件 (${data.missingFiles.filter(f => f.required).length}个必需)
                    </h4>
                    <div class="space-y-3">
                        ${data.missingFiles.map(file => renderMissingFileItem(file)).join('')}
                    </div>
                </div>
                
                <!-- 上传区域 -->
                <div class="mb-6">
                    <h4 class="font-medium text-gray-900 mb-3">上传文件</h4>
                    <div id="uploadZone" class="upload-zone"
                        ondrop="handleDrop(event)"
                        ondragover="handleDragOver(event)"
                        ondragenter="handleDragEnter(event)"
                        ondragleave="handleDragLeave(event)">
                        <input type="file" id="fileInput" multiple accept=".pdf,.jpg,.jpeg,.png" 
                            class="hidden" onchange="handleFileSelect(event)">
                        <i class="fas fa-cloud-upload-alt text-4xl text-gray-400 mb-3"></i>
                        <p class="text-gray-600 font-medium mb-2">拖拽文件到此处或点击上传</p>
                        <p class="text-sm text-gray-500">支持 PDF、JPG、PNG 格式，单个文件最大 20MB</p>
                        <button onclick="document.getElementById('fileInput').click()" 
                                class="mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                            选择文件
                        </button>
                    </div>
                </div>
                
                <!-- 待上传文件列表 -->
                <div id="pendingFiles" class="hidden mb-6">
                    <h4 class="font-medium text-gray-900 mb-3 flex items-center">
                        <i class="fas fa-clock text-blue-600 mr-2"></i>
                        待上传文件
                    </h4>
                    <div id="pendingFilesList" class="space-y-2">
                        <!-- 动态添加 -->
                    </div>
                </div>
                
                <!-- 已上传文件列表 -->
                <div class="mb-6">
                    <h4 class="font-medium text-gray-900 mb-3 flex items-center">
                        <i class="fas fa-check-circle text-green-600 mr-2"></i>
                        已上传文件 (${data.uploadedFiles.length})
                    </h4>
                    <div class="space-y-2">
                        ${data.uploadedFiles.map(file => renderUploadedFileItem(file)).join('')}
                    </div>
                </div>
                
                <!-- 操作按钮 -->
                <div class="flex justify-between items-center pt-4 border-t border-gray-200">
                    <p class="text-sm text-gray-500">
                        <i class="fas fa-info-circle mr-1"></i>
                        上传的文件将在1-2个工作日内完成审核
                    </p>
                    <div class="flex space-x-3">
                        <button onclick="closeUploadModal()" 
                                class="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50">
                            取消
                        </button>
                        <button onclick="submitUploadedFiles()" 
                                id="submitFilesBtn"
                                class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed"
                                disabled>
                            提交文件
                        </button>
                    </div>
                </div>
            `;
        }

        // 渲染缺失文件项
        function renderMissingFileItem(file) {
            return `
                <div class="requirement-item ${uploadedFiles[file.id] ? 'completed' : ''}">
                    <i class="fas ${uploadedFiles[file.id] ? 'fa-check-circle text-green-600' : 'fa-exclamation-circle text-yellow-600'} text-lg mt-1"></i>
                    <div class="flex-1">
                        <div class="flex items-center justify-between">
                            <div>
                                <h5 class="font-medium text-gray-900">
                                    ${file.name}
                                    ${file.required ? '<span class="file-status-badge required ml-2">必需</span>' : '<span class="file-status-badge optional ml-2">可选</span>'}
                                </h5>
                                <p class="text-sm text-gray-600 mt-1">${file.description}</p>
                                <p class="text-xs text-gray-500 mt-1">
                                    格式：${file.acceptedFormats.join(', ')} | 最大：${file.maxSize}
                                </p>
                            </div>
                            ${uploadedFiles[file.id] ? `
                                <div class="text-right">
                                    <p class="text-sm font-medium text-green-600">已选择</p>
                                    <p class="text-xs text-gray-500">${uploadedFiles[file.id].name}</p>
                                    <button onclick="removeSelectedFile('${file.id}')" 
                                            class="text-xs text-red-600 hover:text-red-700 mt-1">
                                        移除
                                    </button>
                                </div>
                            ` : `
                                <button onclick="selectFileFor('${file.id}')" 
                                        class="px-3 py-1 bg-orange-600 text-white text-sm rounded-lg hover:bg-orange-700">
                                    选择文件
                                </button>
                            `}
                        </div>
                    </div>
                </div>
            `;
        }

        // 渲染已上传文件项
        function renderUploadedFileItem(file) {
            return `
                <div class="file-item">
                    <div class="flex items-center space-x-3">
                        <div class="file-icon ${getFileIconClass(file.fileName)}">
                            <i class="fas ${getFileIcon(file.fileName)}"></i>
                        </div>
                        <div class="flex-1">
                            <p class="font-medium text-gray-900 text-sm">${file.name}</p>
                            <p class="text-xs text-gray-500">${file.fileName} · ${file.size} · ${file.uploadDate}</p>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="file-status-badge uploaded">已验证</span>
                            <button onclick="viewFile('${file.id}')" class="text-blue-600 hover:text-blue-700">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button onclick="downloadFile('${file.id}')" class="text-green-600 hover:text-green-700">
                                <i class="fas fa-download"></i>
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        // 文件拖拽处理
        function handleDragEnter(e) {
            e.preventDefault();
            dragCounter++;
            if (dragCounter === 1) {
                document.getElementById('uploadZone').classList.add('drag-over');
            }
        }

        function handleDragLeave(e) {
            e.preventDefault();
            dragCounter--;
            if (dragCounter === 0) {
                document.getElementById('uploadZone').classList.remove('drag-over');
            }
        }

        function handleDragOver(e) {
            e.preventDefault();
        }

        function handleDrop(e) {
            e.preventDefault();
            dragCounter = 0;
            document.getElementById('uploadZone').classList.remove('drag-over');
            
            const files = e.dataTransfer.files;
            handleFiles(files);
        }

        // 文件选择处理
        function handleFileSelect(e) {
            const files = e.target.files;
            handleFiles(files);
        }

        // 处理选中的文件
        function handleFiles(files) {
            const pendingDiv = document.getElementById('pendingFiles');
            const pendingList = document.getElementById('pendingFilesList');
            
            if (files.length > 0) {
                pendingDiv.classList.remove('hidden');
            }
            
            Array.from(files).forEach(file => {
                // 验证文件
                if (!validateFile(file)) {
                    return;
                }
                
                // 创建文件项
                const fileId = `temp_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
                const fileItem = createPendingFileItem(file, fileId);
                pendingList.appendChild(fileItem);
                
                // 启用提交按钮
                document.getElementById('submitFilesBtn').disabled = false;
                
                // 模拟上传进度
                simulateUpload(fileId);
            });
        }

        // 验证文件
        function validateFile(file) {
            const maxSize = 20 * 1024 * 1024; // 20MB
            const allowedTypes = ['application/pdf', 'image/jpeg', 'image/jpg', 'image/png'];
            
            if (!allowedTypes.includes(file.type)) {
                showToast('不支持的文件格式，请上传PDF或图片文件', 'error');
                return false;
            }
            
            if (file.size > maxSize) {
                showToast('文件大小不能超过20MB', 'error');
                return false;
            }
            
            return true;
        }

        // 创建待上传文件项
        function createPendingFileItem(file, fileId) {
            const div = document.createElement('div');
            div.id = `file_${fileId}`;
            div.className = 'file-item';
            div.innerHTML = `
                <div class="flex items-center space-x-3 flex-1">
                    <div class="file-icon ${getFileIconClass(file.name)}">
                        <i class="fas ${getFileIcon(file.name)}"></i>
                    </div>
                    <div class="flex-1">
                        <p class="font-medium text-gray-900 text-sm">${file.name}</p>
                        <p class="text-xs text-gray-500">${formatFileSize(file.size)}</p>
                        <div class="upload-progress" id="progress_${fileId}">
                            <div class="upload-progress-bar" id="progressBar_${fileId}" style="width: 0%"></div>
                        </div>
                    </div>
                    <div class="flex items-center space-x-2">
                        <span class="text-xs text-blue-600" id="status_${fileId}">准备上传</span>
                        <button onclick="cancelUpload('${fileId}')" class="text-red-600 hover:text-red-700">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
            `;
            return div;
        }

        // 模拟上传进度
        function simulateUpload(fileId) {
            let progress = 0;
            const progressBar = document.getElementById(`progressBar_${fileId}`);
            const status = document.getElementById(`status_${fileId}`);
            
            const interval = setInterval(() => {
                progress += Math.random() * 20;
                if (progress > 100) {
                    progress = 100;
                    clearInterval(interval);
                    status.textContent = '上传完成';
                    status.className = 'text-xs text-green-600';
                    
                    // 添加到已上传文件
                    const fileItem = document.getElementById(`file_${fileId}`);
                    const fileName = fileItem.querySelector('.font-medium').textContent;
                    uploadedFiles[fileId] = { name: fileName, id: fileId };
                    
                    // 更新缺失文件列表
                    updateRequirementsList();
                } else {
                    status.textContent = `上传中 ${Math.round(progress)}%`;
                }
                progressBar.style.width = progress + '%';
            }, 200);
        }

        // 取消上传
        function cancelUpload(fileId) {
            const fileItem = document.getElementById(`file_${fileId}`);
            fileItem.remove();
            
            delete uploadedFiles[fileId];
            
            // 检查是否还有待上传文件
            const pendingList = document.getElementById('pendingFilesList');
            if (pendingList.children.length === 0) {
                document.getElementById('pendingFiles').classList.add('hidden');
                document.getElementById('submitFilesBtn').disabled = true;
            }
        }

        // 为特定文件选择
        function selectFileFor(fileType) {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.pdf,.jpg,.jpeg,.png';
            
            input.onchange = (e) => {
                const file = e.target.files[0];
                if (file && validateFile(file)) {
                    uploadedFiles[fileType] = {
                        name: file.name,
                        id: fileType,
                        file: file
                    };
                    updateRequirementsList();
                    document.getElementById('submitFilesBtn').disabled = false;
                }
            };
            
            input.click();
        }

        // 移除选中的文件
        function removeSelectedFile(fileType) {
            delete uploadedFiles[fileType];
            updateRequirementsList();
            
            // 检查是否还有文件
            if (Object.keys(uploadedFiles).length === 0) {
                document.getElementById('submitFilesBtn').disabled = true;
            }
        }

        // 更新需求列表
        function updateRequirementsList() {
            const data = getUploadRequirements(currentUploadAssetId);
            const content = document.getElementById('uploadContent');
            const requirementSection = content.querySelector('.space-y-3');
            
            requirementSection.innerHTML = data.missingFiles.map(file => renderMissingFileItem(file)).join('');
        }

        // 提交上传的文件
        function submitUploadedFiles() {
            const submitBtn = document.getElementById('submitFilesBtn');
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>提交中...';
            
            setTimeout(() => {
                closeUploadModal();
                showToast('文件已成功提交，我们将在1-2个工作日内完成审核', 'success');
                
                // 更新资产卡片状态
                updateAssetCardStatus(currentUploadAssetId);
            }, 2000);
        }

        // 更新资产卡片状态
        function updateAssetCardStatus(assetId) {
            // 找到对应的资产卡片并更新状态
            const assetCards = document.querySelectorAll('.asset-card');
            assetCards.forEach(card => {
                if (card.getAttribute('data-id') == assetId) {
                    // 更新状态标签
                    const statusBadge = card.querySelector('.status-badge');
                    if (statusBadge) {
                        statusBadge.textContent = '审核中';
                        statusBadge.className = 'status-badge status-processing';
                    }
                    
                    // 更新提示信息
                    const warningBox = card.querySelector('.bg-yellow-50');
                    if (warningBox) {
                        warningBox.className = 'bg-blue-50 p-4 rounded-lg border border-blue-200';
                        warningBox.innerHTML = `
                            <div class="flex items-center space-x-2">
                                <i class="fas fa-clock text-blue-600"></i>
                                <span class="text-sm font-medium text-blue-800">文件审核中</span>
                            </div>
                            <p class="text-xs text-blue-700 mt-1">
                                预计1-2个工作日完成审核
                            </p>
                        `;
                    }
                }
            });
        }

        // 关闭上传模态框
        function closeUploadModal() {
            document.getElementById('uploadDocumentsModal').classList.add('hidden');
            document.getElementById('uploadDocumentsModal').classList.remove('flex');
            
            // 清理数据
            currentUploadAssetId = null;
            uploadedFiles = {};
            dragCounter = 0;
        }

        // 查看文件
        function viewFile(fileId) {
            showToast('正在打开文件预览...', 'info');
            
            // 这里可以实现文件预览功能
            setTimeout(() => {
                document.getElementById('filePreviewModal').classList.remove('hidden');
                document.getElementById('filePreviewModal').classList.add('flex');
                
                // 模拟PDF预览
                document.getElementById('filePreviewContent').innerHTML = `
                    <div class="text-center py-20">
                        <i class="fas fa-file-pdf text-6xl text-red-500 mb-4"></i>
                        <p class="text-gray-600">文件预览功能开发中...</p>
                    </div>
                `;
            }, 500);
        }

        // 关闭文件预览
        function closeFilePreview() {
            document.getElementById('filePreviewModal').classList.add('hidden');
            document.getElementById('filePreviewModal').classList.remove('flex');
        }

        // 下载文件
        function downloadFile(fileId) {
            showToast('开始下载文件...', 'info');
            
            // 实际实现中应该触发文件下载
            setTimeout(() => {
                showToast('文件下载完成', 'success');
            }, 1000);
        }

        // 辅助函数
        function getFileIcon(filename) {
            const ext = filename.split('.').pop().toLowerCase();
            switch(ext) {
                case 'pdf': return 'fa-file-pdf';
                case 'jpg':
                case 'jpeg':
                case 'png': return 'fa-file-image';
                case 'doc':
                case 'docx': return 'fa-file-word';
                default: return 'fa-file';
            }
        }

        function getFileIconClass(filename) {
            const ext = filename.split('.').pop().toLowerCase();
            switch(ext) {
                case 'pdf': return 'pdf';
                case 'jpg':
                case 'jpeg':
                case 'png': return 'image';
                case 'doc':
                case 'docx': return 'doc';
                default: return 'other';
            }
        }

        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        // ESC键关闭模态框
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeUploadModal();
                closeFilePreview();
            }
        });

        // 点击模态框外部关闭
        document.getElementById('uploadDocumentsModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeUploadModal();
            }
        });

        document.getElementById('filePreviewModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeFilePreview();
            }
        });

        function continueDraft(id) {
            alert(`继续编辑草稿 ${id}`);
        }

        function deleteDraft(id) {
            alert(`删除草稿 ${id}`);
        }

        function exportData() {
            alert('导出数据');
        }
    </script>
</body>
</html>